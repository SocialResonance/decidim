<%= append_javascript_pack_tag "decidim_verifications" %>
<%= append_stylesheet_pack_tag "decidim_verifications" %>

<%= render "layouts/decidim/application" do %>
  <%= render layout: "layouts/decidim/shared/layout_center" do %>
    <% authorizations = action_authorized_to(onboarding_manager.action, **onboarding_manager.action_authorized_resources) %>
    <% if authorizations.single_authorization_required? && is_active_link?(authorizations.statuses.first.current_path) %>
      <%= cell(
        "decidim/announcement",
        {
          title: t("pending_authorization_active_title", scope: "decidim.onboarding_action_message"),
          body: t(
              "pending_authorization_active_message",
              scope: "decidim.onboarding_action_message",
              action: onboarding_manager.action_text.downcase,
              resource_name: onboarding_manager.model_name.human.downcase,
              resource_title: decidim_sanitize_translated(onboarding_manager.model_title)
            )
        },
        callout_class: "warning"
      ) %>
    <% end %>
    <%= yield %>
  <% end %>
<% end %>
